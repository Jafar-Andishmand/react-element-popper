!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ElementPopper={},t.React)}(this,(function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=r(e);function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],o=!0,n=!1,i=void 0;try{for(var l,f=t[Symbol.iterator]();!(o=(l=f.next()).done)&&(r.push(l.value),!e||r.length!==e);o=!0);}catch(t){n=!0,i=t}finally{try{o||null==f.return||f.return()}finally{if(n)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function a(t,r){var n=t.element,i=t.popper,f=t.position,u=void 0===f?"bottom-center":f,a=t.containerStyle,c=t.arrow,d=t.arrowStyle,p=void 0===d?{}:d,h=t.fixMainPosition,m=t.fixRelativePosition,b=t.offsetY,y=t.offsetX,v=t.animation,g=t.onChange,w=e.useRef(),O=e.useRef(),j=e.useRef(),E={visibility:"hidden",left:"0",top:"0",position:"absolute"},P=e.useMemo((function(){return!0===c}),[c]),M=e.useMemo((function(){return!!i}),[i]),x=e.useCallback((function(){return{position:u,fixMainPosition:h,fixRelativePosition:m,offsetY:b,offsetX:y,defaultArrow:P,animation:v,onChange:g}}),[u,h,m,b,y,P,v,g]);return e.useEffect((function(){if(!M)return e(),O.current.parentNode.style.visibility="hidden",void(j.current&&(j.current.style.visibility="hidden"));function t(t){t&&"resize"!==t.type&&!t.target.contains(w.current)||(t&&e(),s(w,O,j,x(),t))}function e(){j.current&&(j.current.style.transition="none"),O.current&&(O.current.parentNode.style.transition="none")}return t(),document.addEventListener("scroll",t,!0),window.addEventListener("resize",t),function(){document.removeEventListener("scroll",t,!0),window.removeEventListener("resize",t)}}),[M,x]),o.default.createElement("div",{ref:function(t){w.current=t,r&&(r.current=t),null!=r&&r.current&&(r.current.refreshPosition=function(){return s(w,O,j,x())})},style:l({display:"inline-block"},a)},n,!0===c?o.default.createElement("div",{ref:j,className:"ep-arrow",style:l(l({},E),p)}):e.isValidElement(c)?o.default.createElement("div",{ref:j,style:l(l({},E),p)},c):null,o.default.createElement("div",{style:{position:"absolute",left:"0",top:"0",willChange:"transform",visibility:"hidden"}},o.default.createElement("div",{ref:O},i)))}var c=e.forwardRef(a);function s(t,e,r,o,n){var i=o.position,l=o.fixMainPosition,u=o.fixRelativePosition,a=o.offsetY,c=void 0===a?0:a,s=o.offsetX,b=void 0===s?0:s,y=o.defaultArrow,v=o.animation,g=o.onChange;if(t.current&&e.current){var w,O,j,E,P=(j=void 0!==window.pageXOffset,E="CSS1Compat"===(document.compatMode||""),{scrollLeft:j?window.pageXOffset:E?document.documentElement.scrollLeft:document.body.scrollLeft,scrollTop:j?window.pageYOffset:E?document.documentElement.scrollTop:document.body.scrollTop}),M=P.scrollLeft,x=P.scrollTop,S=d(t.current,M,x),L=S.top,T=S.left,A=S.height,C=S.width,R=S.right,N=S.bottom,X=d(e.current,M,x),D=X.top,H=X.left,Y=X.height,k=X.width,z=document.documentElement,I=z.clientHeight,W=z.clientWidth,_=e.current.parentNode,q=f(p(_),2),B=q[0],F=q[1],U=function(t){var e=f(t.split("-"),2),r=e[0],o=void 0===r?"bottom":r,n=e[1],i=void 0===n?"center":n,l="top"===o||"bottom"===o,u="left"===o||"right"===o;u&&("start"===i&&(i="top"),"end"===i&&(i="bottom"));l&&("start"===i&&(i="left"),"end"===i&&(i="right"));return[o,i,l,u]}(i),V=f(U,4),$=V[0],G=V[1],J=V[2],K=V[3],Q=$,Z=function(t,e){return"translate(".concat(t,"px, ").concat(e,"px)")},tt=C-k,et=A-Y,rt="left"===G?0:"right"===G?tt:tt/2,ot=tt-rt,nt="top"===G?0:"bottom"===G?et:et/2,it=et-nt,lt=T-H+B,ft=L-D+F,ut=0,at=0,ct=h(t.current),st=r.current,dt=f(p(st),2),pt=dt[0],ht=dt[1],mt=d(st,M,x)||{},bt=mt.left,yt=mt.top,vt=mt.height,gt=void 0===vt?0:vt,wt=mt.width,Ot=void 0===wt?0:wt,jt=T-bt+pt,Et=L-yt+ht,Pt=0,Mt=0;for("auto"===$&&($="bottom"),"auto"===G&&(G="center"),J&&(lt+=rt,ft+="top"===$?-Y:A,st&&y&&(gt=11,Ot=20)),K&&(lt+="left"===$?-k:C,ft+=nt,st&&y&&(gt=20,Ot=11));ct;)St(d(ct,M,x)),ct=h(ct.parentNode);St({top:x,bottom:x+I,left:M,right:M+W,height:I,width:W}),J&&(ft+="bottom"===Q?c:-c),K&&(lt+="right"===Q?b:-b),v&&J&&!n&&(Mt="bottom"===Q?10:-10),v&&K&&!n&&(Pt="right"===Q?10:-10),lt=lt-ut+Pt,ft=ft-at+Mt;var xt={top:"bottom",bottom:"top",left:"right",right:"left"}[Q];st&&(ut-rt<0&&(jt+=(w=(lt-T)/2)<0?0:w),ut+ot>0&&(jt+=(w=(lt+k-R)/2)>0?0:w),at-nt<0&&(Et+=(O=(ft-L)/2)<0?0:O),at+it>0&&(Et+=(O=(ft+Y-N)/2)>0?0:O),J&&(jt+=C/2-Ot/2,"bottom"===Q&&(Et=ft,ft+=gt),"top"===Q&&(Et=(ft-=gt)+Y)),K&&(Et+=A/2-gt/2,"left"===Q&&(jt=(lt-=Ot)+k),"right"===Q&&(jt=lt,lt+=Ot)),st.style.height=gt+"px",st.style.width=Ot+"px",st.style.transform=Z(jt,Et),st.setAttribute("direction",xt),st.style.visibility="visible"),_.style.transform=Z(lt,ft),_.style.visibility="visible",!n&&v&&setTimeout((function(){_.style.transition=".4s",_.style.transform=Z(lt-Pt,ft-Mt),st&&(st.style.transition=".4s",st.style.transform=Z(jt-Pt,Et-Mt))}),18),g instanceof Function&&g({popper:{top:ft,bottom:ft+Y,left:lt,right:lt+k,height:Y,width:k},element:{top:L,bottom:N,left:T,right:R,height:A,width:C},arrow:{top:Et,bottom:Et+gt,left:jt,right:jt+Ot,height:gt,width:Ot,direction:xt},position:Q+"-"+(0!==ut?"auto":G),scroll:{scrollLeft:M,scrollTop:x}})}function St(t){var e=t.top,r=t.bottom,o=t.left,n=t.right,i=t.height,f=t.width;if(J){var a=Math.round(L-e+A/2),s=Math.round(i/2);l||(L-(Y+c+gt)<e&&a<=s&&"top"===Q?(ft+=Y+A,Q="bottom"):N+Y+c+gt>i+e&&a>=s&&"bottom"===Q&&(ft-=Y+A,Q="top")),u||(T+rt<o&&(ut=m(R-Ot>o?T+rt-o:-C+rt+Ot,ut)),R-ot>n&&(ut=m(T+Ot<n?R-ot-n:C-ot-Ot,ut)))}if(K){var d=Math.round(T-o+C/2),p=Math.round(f/2);l||(T-(k+b+Ot)<o&&d<p&&"left"===Q?(lt+=C+k,Q="right"):R+k+b+Ot>n&&d>p&&"right"===Q&&(lt-=C+k,Q="left")),u||(L+nt<e&&(at=m(N-gt>e?L+nt-e:-A+nt+gt,at)),N-it>r&&(at=m(L+gt<r?N-it-r:A-it-gt,at)))}}}function d(t,e,r){if(t){var o=t.getBoundingClientRect(),n=o.top,i=o.left,l=o.width,f=o.height,u=n+r,a=i+e;return{top:u,bottom:u+f,left:a,right:a+l,width:l,height:f}}}function p(t){if(!t)return[0,0];var e=f((t.style.transform.match(/translate\((.*?)px,\s(.*?)px\)/)||[]).map((function(t){return Number(t)})),3),r=e[1],o=void 0===r?0:r,n=e[2];return[o,void 0===n?0:n]}function h(t){if(t&&"HTML"!==t.tagName)return t.clientHeight<t.offsetHeight||t.clientWidth<t.offsetWidth?t:h(t.parentNode)}function m(t,e){return Math.round(Math.abs(t))>Math.round(Math.abs(e))?t:e}t.default=c,Object.defineProperty(t,"__esModule",{value:!0})}));
